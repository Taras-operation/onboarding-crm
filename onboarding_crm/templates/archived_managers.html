<!-- templates/archived_managers.html -->
{% extends "base.html" %}
{% block title %}–ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">üì¶ –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</h1>

  {% if archived_managers %}
    <div class="overflow-x-auto">
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–Ü–º º—è</th>
            <th>–í—ñ–¥–¥—ñ–ª</th>
            <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
            <th>–°—Ç–∞—Ç—É—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É</th>
            <th>–†—ñ—à–µ–Ω–Ω—è</th>
          </tr>
        </thead>
        <tbody>
          {% for manager in archived_managers %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>{{ manager.username }}</td>
              <td>{{ manager.department or "‚Äî" }}</td>
              <td>{{ manager.created_at.strftime('%d.%m.%Y') }}</td>
              <td>
                {% if manager.onboarding_instances %}
                  –ü—Ä–æ–π–¥–µ–Ω–æ {{ manager.onboarding_instances[-1].onboarding_step }}/{{ manager.onboarding_instances[-1].structure | length }}
                {% else %}
                  ‚Äî
                {% endif %}
              </td>
              <td>
                {% set decision = manager.onboarding_instances[-1].final_decision %}
                {% if decision == 'approved' %}
                  <span class="badge badge-success">–ü—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif decision == 'rejected' %}
                  <span class="badge badge-error">–ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                {% else %}
                  <span class="badge badge-ghost">‚Äî</span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-gray-500">–ü–æ–∫–∏ —â–æ –∞—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</p>
  {% endif %}
</div>
{% endblock %}