{% extends "base.html" %}
{% block title %}–ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold text-gray-800">üì¶ –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</h1>
    <a href="{{ url_for('main.managers_list') }}" class="btn btn-sm btn-outline">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
  </div>

  {% if archived_managers %}
    <div class="overflow-x-auto bg-white rounded-xl shadow">
      <table class="table table-zebra w-full">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th>#</th>
            <th>Telegram</th>
            <th>–ü–æ—Å–∞–¥–∞</th>
            <th>–í—ñ–¥–¥—ñ–ª</th>
            <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
            <th>–§—ñ–¥–±–µ–∫</th>
          </tr>
        </thead>
        <tbody>
          {% for pair in archived_managers %}
            {% set manager = pair[0] %}
            {% set instance = pair[1] %}
            <tr>
              <td>{{ loop.index }}</td>
              <td class="text-blue-600">@{{ manager.username }}</td>
              <td>{{ manager.position }}</td>
              <td>{{ manager.department }}</td>
              <td>{{ instance.created_at.strftime("%d.%m.%Y") }}</td>
              <td>{{ instance.structure | length }}</td>
              <td>{{ instance.onboarding_step }}/{{ instance.structure | length }}</td>
              <td>
                {% if instance.final_decision == 'approved' %}
                  <span class="badge badge-success">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif instance.final_decision == 'rejected' %}
                  <span class="badge badge-error">‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif instance.final_decision == 'revision' %}
                  <span class="badge badge-warning">‚úçÔ∏è –î–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</span>
                {% else %}
                  <span class="badge badge-ghost">‚Äî</span>
                {% endif %}
                <a href="{{ url_for('main.manager_results', manager_id=manager.id) }}" class="btn btn-xs btn-outline ml-2">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-gray-500 mt-6">–ü–æ–∫–∏ —â–æ –∞—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</p>
  {% endif %}
</div>
{% endblock %}