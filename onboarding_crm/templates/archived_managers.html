<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>üì¶ –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fc;
    }
    .sidebar {
      min-width: 250px;
      max-width: 250px;
      background-color: #ffffff;
      height: 100vh;
      box-shadow: 2px 0 5px rgba(0,0,0,0.05);
      padding: 2rem 1rem;
      position: fixed;
      top: 0;
      left: 0;
    }
    .main-content {
      margin-left: 250px;
      padding: 2rem;
    }
    .sidebar .btn {
      text-align: left;
      width: 100%;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  {% include 'components/mentor_sidebar.html' %}

  <!-- –û—Å–Ω–æ–≤–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
  <div class="main-content">

    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3"><span style="font-size: 1.5rem;">üì¶</span> –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</h1>
      <a href="{{ url_for('main.managers_list') }}" class="btn btn-outline-secondary btn-sm">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
    </div>

    {% if archived_managers %}
    <div class="table-responsive bg-white shadow rounded">
      <table class="table table-bordered table-hover align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Telegram</th>
            <th>–ü–æ—Å–∞–¥–∞</th>
            <th>–í—ñ–¥–¥—ñ–ª</th>
            <th>–î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç—É</th>
            <th>–ü—Ä–æ–≥—Ä–µ—Å</th>
            <th>–§—ñ–¥–±–µ–∫</th>
            <th>–î—ñ—ó</th>
          </tr>
        </thead>
        <tbody>
          {% for pair in archived_managers %}
            {% set manager = pair[0] %}
            {% set instance = pair[1] %}
            <tr>
              <td>{{ loop.index }}</td>
              <td class="text-primary">@{{ manager.username }}</td>
              <td>{{ manager.position }}</td>
              <td>{{ manager.department }}</td>
              <td>{{ instance.created_at.strftime('%d.%m.%Y') }}</td>
              <td>{{ instance.onboarding_step }}/{{ instance.structure | length }}</td>
              <td>
                {% if instance.final_decision == 'approved' %}
                  <span class="badge bg-success">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif instance.final_decision == 'rejected' %}
                  <span class="badge bg-danger">‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif instance.final_decision == 'revision' %}
                  <span class="badge bg-warning text-dark">‚úçÔ∏è –î–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</span>
                {% else %}
                  <span class="badge bg-secondary">‚Äî</span>
                {% endif %}
              </td>
              <td>
                <a href="{{ url_for('main.manager_results', manager_id=manager.id, onboarding_id=instance.id) }}"
                   class="btn btn-outline-primary btn-sm">
                  –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center text-muted mt-5">
      <h5>–ü–æ–∫–∏ —â–æ –∞—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</h5>
      <p>–ö–æ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Äî –≤—ñ–Ω –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç.</p>
    </div>
    {% endif %}

  </div>
</body>
</html>