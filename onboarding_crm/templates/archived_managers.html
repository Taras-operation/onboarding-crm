<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üì¶ –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.20/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-white min-h-screen text-gray-800">
  <div class="flex">

    <!-- –°–∞–π–¥–±–∞—Ä –∑–ª—ñ–≤–∞ -->
    {% include 'components/mentor_sidebar.html' %}

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="flex-grow px-6 py-10">

      <div class="flex items-center justify-between mb-8">
        <h1 class="text-4xl font-bold flex items-center gap-2">
          üì¶ <span>–ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</span>
        </h1>
        <a href="/managers/list" class="btn btn-outline btn-sm">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
      </div>

      <div class="overflow-x-auto rounded-xl shadow-lg bg-white">
        <table class="table table-zebra w-full text-sm">
          <thead class="bg-gray-100 text-gray-700">
            <tr>
              <th class="py-3 px-4">#</th>
              <th class="py-3 px-4">Telegram</th>
              <th class="py-3 px-4">–ü–æ—Å–∞–¥–∞</th>
              <th class="py-3 px-4">–í—ñ–¥–¥—ñ–ª</th>
              <th class="py-3 px-4">–î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç—É</th>
              <th class="py-3 px-4">–ü—Ä–æ–≥—Ä–µ—Å</th>
              <th class="py-3 px-4">–§—ñ–¥–±–µ–∫</th>
              <th class="py-3 px-4 text-center">–î—ñ—ó</th>
            </tr>
          </thead>
          <tbody>
            {% for pair in archived_managers %}
              {% set manager = pair[0] %}
              {% set instance = pair[1] %}
              <tr>
                <td class="px-4 py-2 font-medium">{{ loop.index }}</td>
                <td class="px-4 py-2 text-blue-600 font-semibold">@{{ manager.username }}</td>
                <td class="px-4 py-2">{{ manager.position }}</td>
                <td class="px-4 py-2">{{ manager.department }}</td>
                <td class="px-4 py-2">{{ instance.created_at.strftime('%d.%m.%Y') }}</td>
                <td class="px-4 py-2">{{ instance.onboarding_step }}/{{ instance.structure | length }}</td>
                <td class="px-4 py-2">
                  {% if instance.final_decision == 'approved' %}
                    <span class="badge badge-success">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</span>
                  {% elif instance.final_decision == 'rejected' %}
                    <span class="badge badge-error">‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                  {% elif instance.final_decision == 'revision' %}
                    <span class="badge badge-warning">‚úçÔ∏è –î–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</span>
                  {% else %}
                    <span class="badge badge-neutral">‚Äî</span>
                  {% endif %}
                </td>
                <td class="px-4 py-2 text-center">
                  <a href="{{ url_for('main.manager_results', manager_id=manager.id, onboarding_id=instance.id) }}"
                     class="btn btn-sm btn-outline">
                    –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      {% if not archived_managers %}
        <div class="text-center text-gray-500 mt-10">
          <p class="text-lg font-semibold">–ü–æ–∫–∏ —â–æ –∞—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</p>
          <p class="text-sm">–ö–æ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Äî –≤—ñ–Ω –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç.</p>
        </div>
      {% endif %}

    </div> <!-- /flex-grow -->
  </div> <!-- /flex -->
</body>
</html>