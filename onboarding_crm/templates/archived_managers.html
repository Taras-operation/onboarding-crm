{% extends "base.html" %}
{% block title %}–ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">üì¶ –ê—Ä—Ö—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</h1>

  {% if archived_managers %}
    <div class="overflow-x-auto">
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–Ü–º º—è</th>
            <th>–í—ñ–¥–¥—ñ–ª</th>
            <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
            <th>–ü—Ä–æ–≥—Ä–µ—Å</th>
            <th>–†—ñ—à–µ–Ω–Ω—è</th>
          </tr>
        </thead>
        <tbody>
          {% for manager, instance in archived_managers %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>{{ manager.username }}</td>
              <td>{{ manager.department or "‚Äî" }}</td>
              <td>{{ manager.created_at.strftime('%d.%m.%Y') }}</td>
              <td>
                {% if instance.structure %}
                  {% set blocks = instance.structure if instance.structure is not string else instance.structure | from_json %}
                  –ü—Ä–æ–π–¥–µ–Ω–æ {{ instance.onboarding_step }}/{{ blocks | length }}
                {% else %}
                  ‚Äî
                {% endif %}
              </td>
              <td>
                {% if instance.final_decision == 'approved' %}
                  <span class="badge badge-success">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</span>
                {% elif instance.final_decision == 'rejected' %}
                  <span class="badge badge-error">‚ùå –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ</span>
                {% else %}
                  <span class="badge badge-ghost">‚Äî</span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-gray-500">–ü–æ–∫–∏ —â–æ –∞—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</p>
  {% endif %}
</div>
{% endblock %}