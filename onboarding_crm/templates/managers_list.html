<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ –ú–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fc;
        }
        .sidebar {
            min-width: 250px;
            max-width: 250px;
            background-color: #ffffff;
            height: 100vh;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            padding: 2rem 1rem;
            position: fixed;
            top: 0;
            left: 0;
        }
        .main-content {
            margin-left: 250px;
            padding: 2rem;
        }
        .sidebar .btn {
            text-align: left;
            width: 100%;
        }
    </style>
</head>
<body>
  {% include 'components/mentor_sidebar.html' %}

  <div class="main-content">
      <h2 class="mb-4 text-center">üìã –°–ø–∏—Å–æ–∫ –ú–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤</h2>

      <a href="{{ url_for('main.mentor_dashboard') }}" class="btn btn-secondary mb-3">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</a>

      <table class="table table-striped table-bordered table-hover text-center align-middle">
          <thead class="table-light">
              <tr>
                  <th>ID</th>
                  <th>TG –Ω—ñ–∫</th>
                  <th>–í—ñ–¥–¥—ñ–ª</th>
                  <th>–õ–æ–≥—ñ–Ω</th>
                  <th>–ü–æ—Å–∞–¥–∞</th>
                  <th>–û–Ω–±–æ—Ä–¥–∏–Ω–≥</th>
                  <th>–°—Ç–∞—Ç—É—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É</th>
                  <th>–ï—Ç–∞–ø</th>
                  <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
                  <th>–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π</th>
                  <th>–î—ñ—ó</th>
              </tr>
          </thead>
          <tbody>
              {% for manager in managers %}
              {% set instance = manager.manager_onboardings|first %}
              <tr id="manager-row-{{ manager.id }}">
                  <td>{{ manager.id }}</td>
                  <td>{{ manager.tg_nick }}</td>
                  <td>{{ manager.department }}</td>
                  <td>{{ manager.username }}</td>
                  <td>{{ manager.position or '‚Äî' }}</td>
                  <td>
                      {% if instance %}
                          {{ instance.name }}
                      {% else %}
                          <span class="text-muted small">–ù–µ–º–∞—î</span>
                      {% endif %}
                  </td>
                  <td>{{ manager.onboarding_status or '‚Äî' }}</td>
                  <td>{{ manager.onboarding_step or 0 }}/{{ manager.total_steps_calculated or 0 }}</td>
                  <td>{{ manager.created_at.strftime('%d.%m.%Y %H:%M') if manager.created_at else '‚Äî' }}</td>
                  <td>{{ manager.added_by.tg_nick if manager.added_by else '‚Äî' }}</td>
                  <td>
                      <div class="d-flex justify-content-center align-items-center gap-2">
                          {% if instance %}
                          <a href="{{ url_for('main.manager_results', manager_id=manager.id, onboarding_id=instance.id) }}"
                             class="btn btn-outline-secondary btn-sm">
                              üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏
                          </a>
                          {% endif %}
                          {% if current_user.role in ['teamlead', 'developer', 'head'] %}
                          <button class="btn btn-outline-danger btn-sm" onclick="deleteManager({{ manager.id }})">
                              üóëÔ∏è
                          </button>
                          {% endif %}
                      </div>
                  </td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>
</body>
</html>