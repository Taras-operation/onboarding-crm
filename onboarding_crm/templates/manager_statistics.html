<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- üî∑ –°–∞–π–¥–±–∞—Ä -->
  {% include 'components/manager_sidebar.html' %}

  <!-- üî∑ –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="ml-64 p-6">
    <h1 class="text-2xl font-bold mb-6 text-gray-800">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É</h1>

    {% if stats %}
      {% for step in stats %}
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <h2 class="text-xl font-semibold mb-4 text-blue-700">
            –ï—Ç–∞–ø {{ loop.index }} ‚Äî {{ step.title }}
          </h2>

          <!-- ‚úÖ –ó–∞–∫—Ä–∏—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è -->
          <div class="mb-3">
            <p class="font-semibold">
              –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: {{ step.correct_answers }} / {{ step.total_questions }}
            </p>
          </div>

          <!-- ‚úÖ –í—ñ–¥–∫—Ä–∏—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è -->
          {% if step.open_questions %}
            <div class="mt-4">
              <h3 class="font-semibold mb-2">–í—ñ–¥–∫—Ä–∏—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è:</h3>
              <ul class="space-y-2">
                {% for open_q in step.open_questions %}
                  <li class="border rounded p-3 bg-gray-50">
                    <p class="mb-2"><span class="font-semibold">–ü–∏—Ç–∞–Ω–Ω—è:</span> {{ open_q.question }}</p>
                    <p class="mb-2"><span class="font-semibold">–í–∞—à–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:</span> {{ open_q.answer }}</p>

                    {% if open_q.reviewed %}
                      <p class="mb-1">
                        <span class="font-semibold">–û—Ü—ñ–Ω–∫–∞:</span>
                        {% if open_q.accepted %}
                          ‚úÖ <span class="text-green-600">–ó–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                        {% else %}
                          ‚ùå <span class="text-red-600">–ù–µ –∑–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                        {% endif %}
                      </p>
                      {% if open_q.feedback %}
                        <p class="mb-1"><span class="font-semibold">–ö–æ–º–µ–Ω—Ç–∞—Ä:</span> {{ open_q.feedback }}</p>
                      {% endif %}
                    {% else %}
                      <p class="text-yellow-600 italic">–û—á—ñ–∫—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—ñ–¥ –¢–õ/–ú–µ–Ω—Ç–æ—Ä–∞...</p>
                    {% endif %}
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        </div>
      {% endfor %}

      <!-- üî∂ –§—ñ–Ω–∞–ª—å–Ω–∞ –ø–ª–∞—à–∫–∞ -->
      {% if final_status == 'waiting' %}
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-5 rounded-md">
          <p class="font-semibold text-lg mb-1">üéì –û—Å–Ω–æ–≤–Ω–∏–π –µ—Ç–∞–ø –≤–∞—à–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ</p>
          <p>–û—á—ñ–∫—É–π—Ç–µ —Ñ—ñ–¥–±–µ–∫—É –≤—ñ–¥ –¢—ñ–º–ª—ñ–¥–∞/–ú–µ–Ω—Ç–æ—Ä–∞ —â–æ–¥–æ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è.</p>
        </div>
      {% elif final_status == 'passed' %}
        <div class="bg-green-100 border-l-4 border-green-500 text-green-800 p-5 rounded-md">
          <p class="font-semibold text-lg mb-1">‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤—Å—ñ –µ—Ç–∞–ø–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É!</p>
          <p>–í—ñ—Ç–∞—î–º–æ! –¢–µ–ø–µ—Ä –≤–∏ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —É—á–∞—Å–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏ üéâ</p>
        </div>
      {% elif final_status == 'extra_block_added' %}
        <div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-5 rounded-md">
          <p class="font-semibold text-lg mb-1">üîÅ –î–æ–¥–∞–Ω–æ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –±–ª–æ–∫ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –Ω–∞–≤—á–∞–Ω–Ω—è</p>
          <p>–ë—É–¥—å –ª–∞—Å–∫–∞, –ø—Ä–æ–π–¥—ñ—Ç—å —Ñ—ñ–Ω–∞–ª—å–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–Ω–∞–Ω—å.</p>
        </div>
      {% endif %}

    {% else %}
      <!-- üîπ –Ø–∫—â–æ —â–µ –Ω–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
      <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-800 p-5 rounded-md">
        <p class="font-semibold text-lg mb-1">–ü–æ–∫–∏ —â–æ –≤–∏ –Ω–µ –ø—Ä–æ–π—à–ª–∏ –∂–æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç—É</p>
        <p>–Ø–∫ —Ç—ñ–ª—å–∫–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø–µ—Ä—à–∏–π –±–ª–æ–∫ ‚Äî —Ç—É—Ç –∑‚Äô—è–≤–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è.</p>
      </div>
    {% endif %}

  </div>
</body>
</html>